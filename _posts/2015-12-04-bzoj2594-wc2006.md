---
layout: post
title: "[bzoj2594] [Wc2006]水管局长数据加强版"
description: ""
category: "bzoj"
tags: ["lct", "读入优化", "动态树"]
---
{% include JB/setup %}
{% raw %}

### 题意

给定 \\(n(\leq 100000)\\) 个点 \\(m(\leq 1000000)\\) 条边的无向图（城市，水管），
现在定义两点之间的维修费用为所有联通该两点的道路中最长边的最小值，
现在要支持两种操作：

1. 查询两点的维修费用;
2. 删除一条保证存在的边.

操作个数 \\(q(\leq 100000)\\)。


### 题解

要求的费用是最长边最大费用最小，可以考虑维护最小生成森林，然后不断维护两点的最大边权。
动态维护可以考虑用动态树（这里用了link-cut-tree）。现在有两个问题：

1. 动态树删边维护最小生成森林不太方便;
2. 动态树不能直接维护边权。

对于第一个问题，我们可以离线做。读入所有询问，然后倒过来，
先用所有要删的边之外的边构造出lct，然后删边就变成加边了，就可以做了。

对于第二个问题，也不难解决，我们把每条边再给一个点，然后分别和这条边两端的点相连，
把两端的点权设成零，该边对应的点权就是该边的费用，这样就成功转换了。


### 实现

```cpp
```

{% endraw %}

